# Model Function Calling Standard(MFCS)
MFCS是一个开源的标准协议，解决Model与外部工具之间的交互，定义交互Prompt的格式和调用方式等规范。

## 输入Prompt格式规范
- 原则要求：定义了工具调用的格式和方式，确保Model能够正确解析并按需返返回指定的格式，确保解析模块能准确的完成解析。并对Model的输出结果进行约束。
- 工具列表信息区域，Prompt中专门定义了“tool_list”标签，即存放工具列表信息的区域。该区域包含了所有可用工具的名称、描述和参数等信息。
- 记忆信息区域，记忆区域使用“memory_list”标签用于存储长期记忆、人设、偏好等信息。
- Model输出要求：prompt也对Model输出格式做了要求，主要是让使用方能准确解析出是否需要调用工具、记忆查询等能力，并且能准确解析出需要传递的参数等信息，做到对模型的无依赖，可以适配常规的通用模型，包括不支持Function Calling的模型。

具体格式内容可以查看[Prompt](https://github.com/mfcsorg/mfcs-prompt/blob/main/ToolPrompt.txt)

## 使用步骤
站在应用程序的视角，MFCS的使用步骤如下：
### 1. 获取标准Prompt
接收到用户的输入，需要通过模型来处理用户的请求。首先调用MFCS SDK获取标准Prompt的接口，获取标准Prompt。并加上用户的输入内容，组成完整的Prompt（在一次上下文对话中，一般只需要获取一次标准Prompt）。

### 2. 调用Model
 上一步完成了Prompt的生成，接下来将Prompt输入给模型进行处理。模型会根据Prompt的内容进行解析，并生成相应的输出结果。
### 3. 解析Model输出
 Model输出需要解析，需要调用MFCS SDK解析Model输出的接口，解析Model输出，结果可能是需要工具调用的参数和工具名称，也可能是直接需要输出给用户的结果。
### 4.判断是否需要调用工具
  根据标准的解析结果，判断是否需要调用工具，如果需要调用工具，则获取工具名称和参数信息进入下一步；如果不需要调用工具，就直接进入第7步返回结果给用户。
### 5. 调用工具
  根据返回的函数名称匹配对应的函数，并完成函数调用执行。
### 6. 工具结果输入给Model
  把上一步工具调用的结果输入给模型，并带着模型的返回结果进入步骤3解析Model输出。
### 7. 返回结果给用户
  结果返回给用户，完成一次完整的对话（后续也可能出现会话过程中把阶段性的结果持续输出给用户的情况）。